<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo de Flowchart.js</title>
    <!-- Cargar Raphael.js (dependencia necesaria) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
    <!-- Cargar Flowchart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.17.1/flowchart.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        #canvas {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        textarea {
            width: 100%;
            max-width: 600px;
            height: 150px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-family: monospace;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <h1>Demo de Flowchart.js</h1>
    <p>Edita el código del diagrama abajo y haz clic en "Dibujar".</p>

    <textarea id="code">
st=>start: Inicio
e=>end: Fin
op1=>operation: Cargar Clientes
op2=>operation: Cargar Mascotas
cond=>condition: ¿Hay más datos?
io=>inputoutput: Mostrar Resultados

st->op1->op2->cond
cond(yes)->op1
cond(no)->io->e
    </textarea>
    
    <button onclick="drawDiagram()">Dibujar Diagrama</button>

    <div id="canvas"></div>

    <script>
        function drawDiagram() {
            var code = document.getElementById("code").value;
            var chart = flowchart.parse(code);
            
            document.getElementById("canvas").innerHTML = ""; // Limpiar anterior
            chart.drawSVG('canvas', {
                'x': 0,
                'y': 0,
                'line-width': 3,
                'line-length': 50,
                'text-margin': 10,
                'font-size': 14,
                'font-color': 'black',
                'line-color': 'black',
                'element-color': 'black',
                'fill': 'white',
                'yes-text': 'Sí',
                'no-text': 'No',
                'arrow-end': 'block',
                'scale': 1,
                // Estilos específicos
                'symbols': {
                    'start': {
                        'font-color': 'white',
                        'element-color': 'green',
                        'fill': 'green'
                    },
                    'end':{
                        'class': 'end-element'
                    }
                },
                'flowstate' : {
                    'past' : { 'fill' : '#CCCCCC', 'font-size' : 12},
                    'current' : {'fill' : 'yellow', 'font-color' : 'red', 'font-weight' : 'bold'},
                    'future' : { 'fill' : '#FFFF99'},
                    'request' : { 'fill' : 'blue'},
                    'invalid': {'fill' : '#444444'},
                    'approved' : { 'fill' : '#58C4A3', 'font-size' : 12, 'yes-text' : 'APPROVED', 'no-text' : 'n/a' },
                    'rejected' : { 'fill' : '#C45879', 'font-size' : 12, 'yes-text' : 'n/a', 'no-text' : 'REJECTED' }
                }
            });
        }

        // Dibujar al cargar
        window.onload = drawDiagram;
    </script>
</body>
</html>
